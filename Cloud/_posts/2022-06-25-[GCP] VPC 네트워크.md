---
layout: post
title: GCP VPC 네트워크
description: >
  GCP를 이용하여 자그만한 환경 구축 - 1
sitemap: false
hide_last_modified: true
---
1. 포스팅
{:toc}

# 목표 구성

{:toc}
<hr/>

![](/assets/img/blog/posting/gcp/Goal3Tierdrawio.svg)


gcp 항목중 VPC 네트워크에 들어가면 제일 먼저 보이는 항목.

![](/assets/img/blog/posting/gcp/vpcNetwork.PNG)

기본적으로 GCP는 네트워크환경을 리전마다 IP와 게이트웨이 방화벽 등 설정을 만들어 놨다.

그 중에 내부 네트워크 망을 만들어 망내에 내부 IP를 사용할려하면 VPC 네트워크를 만들어야한다.
(예시) 10.X.X.X/24 대역


# VPC 네트워크 만들기

{:toc}
![](/assets/img/blog/posting/gcp/subnet-2.PNG)



## 서브넷 마스크

{:toc}
<hr/>

너무 큰 브로드캐스트 도메인은 네트워크 환경에서 패킷전송을 느리게하고 성능저하를 발생

> 네트워크를 분할하여 통신 성능을 보장하자.

IPv4 자원의 한계가 존재하며 주소를 낭비 없이 사용할 수 있도록 IETF에서 로컬 네트워크 내부에서 접속한 호스트의 IP 대역을 외부 네트워크와 명확하게 구분할 수 있는 수단을 표준화는데 사용

IPv4는 4개의 바이너리 8자리수로 이루어져 총 32비트로 구성

192.168.0.1 → 1100 0000 . 1010 1000 . 0000 0000 . 0000 0001

서브넷을 구분하는 방법 중 하나.

서브넷 마스크 범위 밖에 있는 장치는 로컬 네트워크가 아니라고 판단.
서브넷 마스크를 어떤 범위로 하냐에 따라 로컬 네트워크의 범위가 넓어지도하며 좁아지기도한다.

192.168.0.1/24 ← / 로 표시되는 단위를 CIDR 표기법이라고 함.


> 클래스의 개념을 대체

## 계산방법

{:toc}
<hr/>

서브넷 마스크를 계산할 때는 논리곱(AND)를 사용.

1100 0000. 1010 1000. 0000 0000. 0000 0001 - IP 주소
1111 1111 .  1111 1111.  1111  1111.  0000 0000 - 서브넷 마스크
1100 0000. 1010 1000. 0000 0000. 0000 0000 - 서브넷 네트워크

호스트 개수 : 네트워크 주소와 브로드캐스트 주소를 제외한 254개
네트워크 개수 : 1개

|항목|설명|
|---|---|
|이름|내부 네트워크에서 서브넷을 구분하기 위한 이름.|
|리전|구글에서 구성해놓은 데이터센터 위치|
|IP 주소 범위|사용할 IP 대역을 지정, CIDR 표기법을 따라야함|


## 생성한 서브넷

{:toc}
<hr/>

![](/assets/img/blog/posting/gcp/subnet-myvpc.PNG)

위와 같이 만든 서브넷들을 이용하여 인스턴스나 로드밸런스를 서브넷 안에 집어넣는다.


